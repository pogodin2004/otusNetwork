# Проектная работа
## Реализация локальной сети предприятия на основе VLAN с технологиями избыточности и безопасности
### Таблица адресации
| Устройство         | Интерфейс   | IP-адрес      | Маска подсети   | 
|--------------------|-------------|---------------|-----------------|
| ISP1               | Loopback 1  | 100.100.100.1 | 255.255.255.255 |
|                    | G0/0/1      | 192.168.100.2 | 255.255.255.252 |
| ISP2               | Loopback 1  | 200.200.200.1 | 255.255.255.255 |
|                    | G0/0/1      | 192.168.200.2 | 255.255.255.252 |
| R1                 | G0/0/1      | 192.168.100.1 | 255.255.255.252 |
|                    | G0/0/0.10   | 172.16.10.1   | 255.255.255.0   |
|                    | G0/0/0.20   | 172.16.20.1   | 255.255.255.0   |
|                    | G0/0/0.30   | 172.16.30.1   | 255.255.255.0   |
|                    | G0/0/0.100  | 10.10.10.1    | 255.255.255.0   |
|                    | G0/0/0.110  | 10.10.11.1    | 255.255.255.0   |
|                    | G0/0/0.120  | 10.10.12.1    | 255.255.255.0   |
|                    | G0/0/0.333  | 192.168.0.1   | 255.255.255.0   |
|                    | G0/0/0.666  | 192.168.10.1  | 255.255.255.0   |
|                    | G0/0/0.1000 | -             | -               |
| R2                 | G0/0/1      | 192.168.200.1 | 255.255.255.252 |
|                    | G0/0/0.10   | 172.16.10.2   | 255.255.255.0   |
|                    | G0/0/0.20   | 172.16.20.2   | 255.255.255.0   |
|                    | G0/0/0.30   | 172.16.30.2   | 255.255.255.0   |
|                    | G0/0/0.100  | 10.10.10.2    | 255.255.255.0   |
|                    | G0/0/0.110  | 10.10.11.2    | 255.255.255.0   |
|                    | G0/0/0.120  | 10.10.12.2    | 255.255.255.0   |
|                    | G0/0/0.333  | 192.168.0.2   | 255.255.255.0   |
|                    | G0/0/0.666  | 192.168.10.2  | 255.255.255.0   |
|                    | G0/0/0.1000 | -             | -               |
| S2-ADMIN           | VLAN 333    | 192.168.0.13  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.13 | 255.255.255.0   |
| S1-ADMIN           | VLAN 333    | 192.168.0.10  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.10 | 255.255.255.0   |
| S1-DISTR           | VLAN 333    | 192.168.0.11  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.11 | 255.255.255.0   |
| S2-DISTR           | VLAN 333    | 192.168.0.12  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.12 | 255.255.255.0   |
| S1-LAB1            | VLAN 333    | 192.168.0.9   | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.9  | 255.255.255.0   |
| S1-LAB2            | VLAN 333    | 192.168.0.14  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.14 | 255.255.255.0   |
| S1-LAB3            | VLAN 333    | 192.168.0.15  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.15 | 255.255.255.0   |
| S1-BUH             | VLAN 333    | 192.168.0.16  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.16 | 255.255.255.0   |
| S1-HR              | VLAN 333    | 192.168.0.17  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.17 | 255.255.255.0   |
| S1-MNGMNT          | VLAN 333    | 192.168.0.18  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.18 | 255.255.255.0   |
| MS0                | VLAN 333    | 192.168.0.19  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.19 | 255.255.255.0   |
| MS1                | VLAN 333    | 192.168.0.20  | 255.255.255.0   |
|                    | VLAN 666    | 192.168.10.20 | 255.255.255.0   |
| APPLICATION SERVER | NIC         | 192.168.0.5   | 255.255.255.0   |
| DHCP SERVER        | NIC         | 192.168.0.4   | 255.255.255.0   |
| 1C SERVER          | NIC         | 192.168.0.6   | 255.255.255.0   |
| ADMIN PC           | NIC         | 192.168.0.8   | 255.255.255.0   |
| NETWORK ADMIN PC   | NIC         | 192.168.10.7  | 255.255.255.0   |
| PC10_1             | NIC         | DHCP          |                 |
| PC10_2             | NIC         | DHCP          |                 |
| ...                | ...         | ...           |                 |
| PC120_1            | NIC         | DHCP          |                 |
| PC120_2            | NIC         | DHCP          |                 |

### Таблица VLAN
| VLAN  | ИМЯ          |
|-------|--------------|
| 10    | LAB1         |
| 20    | LAB2         |
| 30    | LAB3         |
| 100   | MNGMNT       |
| 110   | BUH          |
| 120   | HR           |
| 333   | ADMIN        |
| 666   | NET_ADMIN    |
| 999   | doNotDisturb |
| 1000  | NATIVE       |

### ACL
   VLAN10 - VLAN30
   * выходит в интернет только через ISP1
   * имеет доступ к DHCP и DNS серверу
   * имеет доступ к FILESHARE по FTP и WEB SERVER по HTTP(S)
   * не имеет доступа к сетевому оборудованию по SSH
   * не имеет доступа к ПК в других VLANах
```
ip access-list extended LAB1
permit udp any any range bootps bootpc
permit udp any any eq domain
permit tcp any any eq domain
permit ip 172.16.10.0 0.0.0.255 host 100.100.100.1
permit tcp 172.16.10.0 0.0.0.255 host 192.168.0.5 range www 443
permit tcp 172.16.10.0 0.0.0.255 host 192.168.0.6 range 20 ftp
deny tcp 172.16.10.0 0.0.0.255 any eq 22
deny ip 172.16.10.0 0.0.0.255 192.168.0.0 0.0.0.255
deny ip 172.16.10.0 0.0.0.255 172.16.20.0 0.0.0.255
deny ip 172.16.10.0 0.0.0.255 172.16.30.0 0.0.0.255
deny ip 172.16.10.0 0.0.0.255 10.10.10.0 0.0.0.255
deny ip 172.16.10.0 0.0.0.255 10.10.11.0 0.0.0.255
deny ip 172.16.10.0 0.0.0.255 10.10.12.0 0.0.0.255
permit ip host 172.16.10.2 any

ip access-list extended LAB2
permit udp any any range bootps bootpc
permit udp any any eq domain
permit tcp any any eq domain
permit ip 172.16.20.0 0.0.0.255 host 100.100.100.1
permit tcp 172.16.20.0 0.0.0.255 host 192.168.0.5 range www 443
permit tcp 172.16.20.0 0.0.0.255 host 192.168.0.6 range 20 ftp
deny tcp 172.16.20.0 0.0.0.255 any eq 22
deny ip 172.16.20.0 0.0.0.255 192.168.0.0 0.0.0.255
deny ip 172.16.20.0 0.0.0.255 172.16.10.0 0.0.0.255
deny ip 172.16.20.0 0.0.0.255 172.16.30.0 0.0.0.255
deny ip 172.16.20.0 0.0.0.255 10.10.10.0 0.0.0.255
deny ip 172.16.20.0 0.0.0.255 10.10.11.0 0.0.0.255
deny ip 172.16.20.0 0.0.0.255 10.10.12.0 0.0.0.255
permit ip host 172.16.20.2 any

ip access-list extended LAB3
permit udp any any range bootps bootpc
permit udp any any eq domain
permit tcp any any eq domain
permit ip 172.16.30.0 0.0.0.255 host 100.100.100.1
permit tcp 172.16.30.0 0.0.0.255 host 192.168.0.5 range www 443
permit tcp 172.16.30.0 0.0.0.255 host 192.168.0.6 range 20 ftp
deny tcp 172.16.30.0 0.0.0.255 any eq 22
deny ip 172.16.30.0 0.0.0.255 192.168.0.0 0.0.0.255
deny ip 172.16.30.0 0.0.0.255 172.16.10.0 0.0.0.255
deny ip 172.16.30.0 0.0.0.255 172.16.20.0 0.0.0.255
deny ip 172.16.30.0 0.0.0.255 10.10.10.0 0.0.0.255
deny ip 172.16.30.0 0.0.0.255 10.10.11.0 0.0.0.255
deny ip 172.16.30.0 0.0.0.255 10.10.12.0 0.0.0.255
permit ip host 172.16.30.2 any
```

   VLAN100
   * выходит в интернет через ISP1, в случае его недоступности - через ISP2
   * имеет доступ к DHCP и DNS серверу
   * имеет доступ к FILESHARE по FTP и WEB SERVER по HTTP(S)
   * не имеет доступа к сетевому оборудованию по SSH
   * имеет доступ к ПК во VLANе BUH и HR

```
ip access-list extended MNGMNT
permit udp any any range bootps bootpc
permit udp any any eq domain
permit tcp any any eq domain
permit ip 10.10.10.0 0.0.0.255 host 100.100.100.1
permit ip 10.10.10.0 0.0.0.255 host 200.200.200.1
permit ip 10.10.10.0 0.0.0.255 10.10.11.0 0.0.0.255
permit ip 10.10.10.0 0.0.0.255 10.10.12.0 0.0.0.255
permit tcp 10.10.10.0 0.0.0.255 host 192.168.0.5 range www 443
permit tcp 10.10.10.0 0.0.0.255 host 192.168.0.6 range 20 ftp
deny tcp 10.10.10.0 0.0.0.255 any eq 22
deny ip 10.10.10.0 0.0.0.255 192.168.0.0 0.0.0.255
deny ip 10.10.10.0 0.0.0.255 172.16.10.0 0.0.0.255
deny ip 10.10.10.0 0.0.0.255 172.16.20.0 0.0.0.255
permit ip host 10.10.10.2 any
```

   VLAN110
   * выходит в интернет через ISP1, в случае его недоступности - через ISP2
   * имеет доступ к DHCP и DNS серверу
   * имеет доступ WEB SERVER по HTTP(S)
   * не имеет доступа к сетевому оборудованию по SSH
   * имеет доступ к ПК во VLANе HR

```
ip access-list extended BUH
permit udp any any range bootps bootpc
permit udp any any eq domain
permit tcp any any eq domain
permit ip 10.10.11.0 0.0.0.255 host 100.100.100.1
permit ip 10.10.11.0 0.0.0.255 host 200.200.200.1
permit ip 10.10.11.0 0.0.0.255 10.10.11.0 0.0.0.255
permit ip 10.10.11.0 0.0.0.255 10.10.12.0 0.0.0.255
permit ip 10.10.11.0 0.0.0.255 10.10.12.0 0.0.0.255
permit tcp 10.10.11.0 0.0.0.255 host 192.168.0.5 range www 443
deny tcp 10.10.11.0 0.0.0.255 any eq 22
deny ip 10.10.11.0 0.0.0.255 192.168.0.0 0.0.0.255
deny ip 10.10.11.0 0.0.0.255 172.16.10.0 0.0.0.255
deny ip 10.10.11.0 0.0.0.255 172.16.20.0 0.0.0.255
deny ip 10.10.11.0 0.0.0.255 10.10.10.0 0.0.0.255
permit ip host 10.10.11.2 any
```

   VLAN120
   * выходит в интернет через ISP1, в случае его недоступности - через ISP2
   * имеет доступ к DHCP и DNS серверу
   * имеет доступ WEB SERVER по HTTP(S)
   * не имеет доступа к сетевому оборудованию по SSH
   * имеет доступ к ПК во VLANе HR

```
ip access-list extended HR
permit udp any any range bootps bootpc
permit udp any any eq domain
permit tcp any any eq domain
permit ip 10.10.12.0 0.0.0.255 host 100.100.100.1
permit ip 10.10.12.0 0.0.0.255 host 200.200.200.1
permit ip 10.10.12.0 0.0.0.255 10.10.11.0 0.0.0.255
permit ip 10.10.12.0 0.0.0.255 10.10.12.0 0.0.0.255
permit ip 10.10.12.0 0.0.0.255 10.10.11.0 0.0.0.255
permit tcp 10.10.12.0 0.0.0.255 host 192.168.0.5 range www 443
deny tcp 10.10.12.0 0.0.0.255 any eq 22
deny ip 10.10.12.0 0.0.0.255 192.168.0.0 0.0.0.255
deny ip 10.10.12.0 0.0.0.255 172.16.10.0 0.0.0.255
deny ip 10.10.12.0 0.0.0.255 172.16.20.0 0.0.0.255
deny ip 10.10.12.0 0.0.0.255 10.10.10.0 0.0.0.255
permit ip host 10.10.12.2 any
```

   VLAN666
   * выходит в интернет через ISP1, в случае его недоступности - через ISP2
   * имеет доступ к сетевому оборудованию по SSH

```
ip access-list extended NET_ADMIN
permit ip host 192.168.10.7 100.100.100.1 0.0.0.0
permit ip host 192.168.10.7 200.200.200.1 0.0.0.0
permit tcp host 192.168.10.7 any eq 22
deny ip host 192.168.10.7 192.168.0.0 0.0.0.255
deny ip host 192.168.10.7 172.16.10.0 0.0.0.255
deny ip host 192.168.10.7 172.16.20.0 0.0.0.255
deny ip host 192.168.10.7 172.16.30.0 0.0.0.255
deny ip host 192.168.10.7 10.10.10.0 0.0.0.255
deny ip host 192.168.10.7 10.10.11.0 0.0.0.255
deny ip host 192.168.10.7 10.10.12.0 0.0.0.255
permit ip host 192.168.10.2 any
```
