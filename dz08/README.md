# Лабораторная работа - Реализация DHCPv4 
## Топология
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/topology.png)
## Таблица адресации
| Устройство | Интерфейс   | IP-адрес     | Маска подсети   | Шлюз по умолчанию | 
| ---------- |:-----------:|:------------:|:---------------:|:-----------------:|
| R1         | G0/0/0      | 10.0.0.1     | 255.255.255.252 |                   |
|            | G0/0/1      |              |                 |                   |
|            | G0/0/1.100  | 192.168.1.1  | 255.255.255.192 |                   |
|            | G0/0/1.200  | 192.168.1.65 | 255.255.255.224 |                   |
|            | G0/0/1.1000 |              |                 |                   |
| R2         | G0/0/0      | 10.0.0.2     | 255.255.255.252 |                   |
|            | G0/0/1      | 192.168.1.97 | 255.255.255.240 |                   |
| S1         | VLAN 200    | 192.168.1.2  | 255.255.255.192 | 192.168.1.1       | 
| S2         | VLAN 1      | 192.168.1.66 | 255.255.255.224 | 192.168.1.65      |
| PC-A       | NIC         | DHCP         | DHCP            | DHCP              |
| PC-B       | NIC         | DHCP         | DHCP            | DHCP              |

## Таблица VLAN
| VLAN       | Имя         | Назначенный интерфейс      | 
| ---------- |:-----------:|:--------------------------:|
| 1          | нет         | S2 F0/18                   |
| 100        | Клиенты     | S1 F0/6                    |
| 200        | Управление  | S1 VLAN 200                |
| 999        | Parking Lot | S1 F0/1-4, F0/7-24, G0/1-2 |
| 1000       | Сщбственная | -                          |

## Задачи
### Часть 1. Создание сети и настройка основных параметров устройства
### Часть 2. Настройка и проверка двух серверов DHCPv4 на R1
### Часть 3. Настройка и проверка DHCP-ретрансляции на R2

## Общие сведения/сценарий

   Протокол динамической конфигурации сетевого узла (DHCP) — сетевой протокол, позволяющий сетевым администраторам управлять и автоматизировать назначение IP-адресов. Без использования DHCP  для IPv4 администратору необходимо вручную назначать и настраивать IP-адреса, предпочтительные DNS-серверы и шлюзы по умолчанию. По мере увеличения сети и перемещении устройств из одной внутренней сети в другую это становится административной проблемой.
В предложенном сценарии размеры компании увеличились, и сетевые администраторы больше не имеют возможности назначать IP-адреса для устройств вручную. Ваша задача заключается в настройке маршрутизатора R1 для назначения IPv4-адресов в двух разных подсетях. 

   **Примечание:** Маршрутизаторы, используемые в практических лабораторных работах CCNA, - это Cisco 4221 с Cisco IOS XE Release 16.9.4 (образ universalk9). В лабораторных работах используются коммутаторы Cisco Catalyst 2960 с Cisco IOS версии 15.2(2) (образ lanbasek9). Можно использовать другие маршрутизаторы, коммутаторы и версии Cisco IOS. В зависимости от модели устройства и версии Cisco IOS доступные команды и результаты их выполнения могут отличаться от тех, которые показаны в лабораторных работах. Правильные идентификаторы интерфейса см. в сводной таблице по интерфейсам маршрутизаторов в конце лабораторной работы.

   **Примечание.** Убедитесь, что у всех маршрутизаторов и коммутаторов была удалена начальная конфигурация. Если вы не уверены в этом, обратитесь к инструктору.

## Необходимые ресурсы
   * 2 маршрутизатора (Cisco 4221 с универсальным образом Cisco IOS XE версии 16.9.4 или аналогичным)
   * 2 коммутатора (Cisco 2960 с операционной системой Cisco IOS 15.2(2) (образ lanbasek9) или аналогичная модель)
   * 2 ПК (ОС Windows с программой эмуляции терминалов, такой как Tera Term)
   * Консольные кабели для настройки устройств Cisco IOS через консольные порты.
   * Кабели Ethernet, расположенные в соответствии с топологией

## Часть 1. Создание сети и настройка основных параметров устройства

   В первой части лабораторной работы вам предстоит создать топологию сети и настроить базовые параметры для узлов ПК и коммутаторов

### Шаг 1. Создание схемы адресации

   Подсеть сети 192.168.1.0/24 в соответствии со следующими требованиями:

   a. Одна подсеть «Подсеть A», поддерживающая 58 хостов (клиентская VLAN на R1).
   Подсеть A
```
192.168.1.0/26
```
   Запишите первый IP-адрес в таблице адресации для R1 G0/0/1.100 . Запишите второй IP-адрес в таблице адресов для S1 VLAN 200 и введите соответствующий шлюз по умолчанию.

   b. Одна подсеть «Подсеть B», поддерживающая 28 хостов (управляющая VLAN на R1). 
   Подсеть B:

```
192.168.1.64/27
```

   Запишите первый IP-адрес в таблице адресации для R1 G0/0/1.200. Запишите второй IP-адрес в таблице адресов для S1 VLAN 200 и введите соответствующий шлюз по умолчанию.

   c. Одна подсеть «Подсеть C», поддерживающая 12 узлов (клиентская сеть на R2).
   Подсеть C:
   Запишите первый IP-адрес в таблице адресации для R2 G0/0/1.

```
192.168.1.96/28
```

### Шаг 2.Создайте сеть согласно топологии.

   Подключите устройства, как показано в топологии, и подсоедините необходимые кабели.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/my_topology.png)

### Шаг 3. Произведите базовую настройку маршрутизаторов.

   a. Назначьте маршрутизатору имя устройства.

   b. Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

   c. Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

   d. Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

   e. Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.

   f. Зашифруйте открытые пароли.

   g. Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

   h. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

   i. Установите часы на маршрутизаторе на сегодняшнее время и дату.

   **Примечание.** Вопросительный знак (?) позволяет открыть справку с правильной последовательностью параметров, необходимых для выполнения этой команды.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_settings.png)

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r2_settings.png)

### Шаг 4. Настройка маршрутизации между сетями VLAN на маршрутизаторе R1

   a. Активируйте интерфейс G0/0/1 на маршрутизаторе.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_g0.0.1.png)

   b. Настройте подинтерфейсы для каждой VLAN в соответствии с требованиями таблицы IP-адресации. Все субинтерфейсы используют инкапсуляцию 802.1Q и назначаются первый полезный адрес из вычисленного пула IP-адресов. Убедитесь, что подинтерфейсу для native VLAN не назначен IP-адрес. Включите описание для каждого подинтерфейса.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_vlan.png)

   c. Убедитесь, что вспомогательные интерфейсы работают.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_vlan_int_work.png)

### Шаг 5. Настройте G0/1 на R2, затем G0/0/0 и статическую маршрутизацию для обоих маршрутизаторов

   a. Настройте G0/0/1 на R2 с первым IP-адресом подсети C, рассчитанным ранее.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r2_g0.0.1.png)

   b. Настройте интерфейс G0/0/0 для каждого маршрутизатора на основе приведенной выше таблицы IP-адресации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r2_g0.0.0.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_g0.0.0.png)

   c. Настройте маршрут по умолчанию на каждом маршрутизаторе, указываемом на IP-адрес G0/0/0 на другом маршрутизаторе.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_route.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r2_route.png)

   d. Убедитесь, что статическая маршрутизация работает с помощью пинга до адреса G0/0/1 R2 от R1.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_ping_r2.png)

   e. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_wr_mem.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_wr_mem.png)

### Шаг 6. Настройте базовые параметры каждого коммутатора.

   a. Присвойте коммутатору имя устройства.

   b. Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

   c. Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

   d. Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

   e. Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.

   f. Зашифруйте открытые пароли.

   g. Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

   h. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

   i. Установите часы на маршрутизаторе на сегодняшнее время и дату.

   **Примечание.** Вопросительный знак (?) позволяет открыть справку с правильной последовательностью параметров, необходимых для выполнения этой команды.

   j. Скопируйте текущую конфигурацию в файл загрузочной конфигурации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_config.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s2_config.png)

### Шаг 7. Создайте сети VLAN на коммутаторе S1.

   **Примечание.** S2 настроен только с базовыми настройками. 

   a. Создайте необходимые VLAN на коммутаторе 1 и присвойте им имена из приведенной выше таблицы.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_vlans.png)

   b. Настройте и активируйте интерфейс управления на S1 (VLAN 200), используя второй IP-адрес из подсети, рассчитанный ранее. Кроме того установите шлюз по умолчанию на S1.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_vlan_200.png)

   c. Настройте и активируйте интерфейс управления на S2 (VLAN 1), используя второй IP-адрес из подсети, рассчитанный ранее. Кроме того, установите шлюз по умолчанию на S2

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_vlans.png)

   d. Назначьте все неиспользуемые порты S1 VLAN Parking_Lot, настройте их для статического режима доступа и административно деактивируйте их. На S2 административно деактивируйте все неиспользуемые порты.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_vlan_999-1.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_vlan_999-2.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s2_vlan_shut-2.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s2_vlan_shut-2.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s2_vlan_shut-3.png)

   **Примечание.** Команда interface range полезна для выполнения этой задачи с минимальным количеством команд.

### Шаг 8. Назначьте сети VLAN соответствующим интерфейсам коммутатора.

   a. Назначьте используемые порты соответствующей VLAN (указанной в таблице VLAN выше) и настройте их для режима статического доступа.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_fa_0.6.png)

   b. Убедитесь, что VLAN назначены на правильные интерфейсы.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_vlan_config.png)

```
   Вопрос: Почему интерфейс F0/5 указан в VLAN 1?
   Ответ: этот интерфейс является магистральным для S1 и R1

```

### Шаг 9. Вручную настройте интерфейс S1 F0/5 в качестве транка 802.1Q.

   a. Измените режим порта коммутатора, чтобы принудительно создать магистральный канал.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_fa_0.5.png)

   b. В рамках конфигурации транка  установите для native  VLAN значение 1000.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_fa_0.5_nat_vlan.png)

   c. В качестве другой части конфигурации магистрали укажите, что VLAN 100, 200 и 1000 могут проходить по транку.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_fa_0.5_trunk.png)

   d. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_wr_mem.png)

   e. Проверьте состояние транка.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/s1_fa_0.5_trunk_prop.png)

```
   Вопрос: Какой IP-адрес был бы у ПК, если бы он был подключен к сети с помощью DHCP?
   Ответ: любой свободный адрес из веделенного пула адресов DHCP-сервера
```

## Часть 2. Настройка и проверка двух серверов DHCPv4 на R1

   В части 2 необходимо настроить и проверить сервер DHCPv4 на R1. Сервер DHCPv4 будет обслуживать две подсети, подсеть A и подсеть C.

### Шаг 1. Настройте R1 с пулами DHCPv4 для двух поддерживаемых подсетей. Ниже приведен только пул DHCP для подсети A

   a. Исключите первые пять используемых адресов из каждого пула адресов.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_dhcp_exclud_addr.png)

   b. Создайте пул DHCP (используйте уникальное имя для каждого пула).

   c. Укажите сеть, поддерживающую этот DHCP-сервер.

   d. В качестве имени домена укажите CCNA-lab.com.

   e. Настройте соответствующий шлюз по умолчанию для каждого пула DHCP.

   f. Настройте время аренды на 2 дня 12 часов и 30 минут.

```
В CPT нет такой команды
```

   g. Затем настройте второй пул DHCPv4, используя имя пула R2_Client_LAN и вычислите сеть, маршрутизатор по умолчанию, и используйте то же имя домена и время аренды, что и предыдущий пул DHCP.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_dhcp_pools.png)

### Шаг 2. Сохраните конфигурацию.

   Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_dhcp_wr_mem.png)

### Шаг 3. Проверка конфигурации сервера DHCPv4

   a. Чтобы просмотреть сведения о пуле, выполните команду **show ip dhcp pool .**

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_sh_dhcp_pool.png)

   b. Выполните команду **show ip dhcp bindings** для проверки установленных назначений адресов DHCP.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_dhcp_bind.png)

   c. Выполните команду **show ip dhcp server statistics** для проверки сообщений DHCP.

```
В CPT нет такой команды
```

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_dhcp_serv.png)

### Шаг 4. Попытка получить IP-адрес от DHCP на PC-A

   a. Из командной строки компьютера PC-A выполните команду **ipconfig /all.**

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-a_static.png)

   b. После завершения процесса обновления выполните команду **ipconfig** для просмотра новой информации об IP-адресе.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-a_dhcp.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-a_ipconfig.png)

   c. Проверьте подключение с помощью пинга IP-адреса интерфейса R0 G0/0/1.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-a_ping.png)

## Часть 3. Настройка и проверка DHCP-ретрансляции на R2

   В части 3 настраивается R2 для ретрансляции DHCP-запросов из локальной сети на интерфейсе G0/0/1 на DHCP-сервер (R1). 

### Шаг 1. Настройка R2 в качестве агента DHCP-ретрансляции для локальной сети на G0/0/1

   a. Настройте команду **ip helper-address** на G0/0/1, указав IP-адрес G0/0/0 R1.

   b. Сохраните конфигурацию.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r2_ip_helper.png)

### Шаг 2. Попытка получить IP-адрес от DHCP на PC-B

   a. Из командной строки компьютера PC-B выполните команду **ipconfig /all.**

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-b_static.png)

   b. После завершения процесса обновления выполните команду **ipconfig** для просмотра новой информации об IP-адресе. 

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-b-dhcp.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-b_ipconfig.png)

   c. Проверьте подключение с помощью пинга IP-адреса интерфейса R1 G0/0/1.

```
По условию на интерфейсе нет ip-адреса
```

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/pc-b_ping.png)


   d. Выполните **show ip dhcp binding** для R1 для проверки назначений адресов в DHCP.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/r1_last_dhcp_bind.png)

   e. Выполните команду **show ip dhcp server statistics** для проверки сообщений DHCP.

```
В CPT нет такой команды
```
*********************************************************************************************
# Лабраторная работа - Настройка DHCPv6 

## Топология

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_topology.png)

## Таблица адресации
| Устройство | Интерфейс | IPv6-адрес             |
| ---------- |:---------:|:----------------------:|
| R1         | G0/0/0    | 2001:db8:acad:2::1/64  |
|            |           | fe80::1                |
|            | G0/0/1    | 2001:db8:acad:1::1/64  |
|            |           | fe80::1                |
| R2         | G0/0/0    | 2001:db8:acad:2::2/64  |
|            |           | fe80::2                |
|            | G0/0/1    | 2001:db8:acad:3::1/64  | 
|            |           | fe80::1                |
| PC-A       | NIC       | DHCP                   |
| PC-B       | NIC       | DHCP                   |

## Задачи
### Часть 1. Создание сети и настройка основных параметров устройства
### Часть 2. Проверка назначения адреса SLAAC от R1
### Часть 3. Настройка и проверка сервера DHCPv6 без гражданства на R1
### Часть 4. Настройка и проверка состояния DHCPv6 сервера на R1
### Часть 5. Настройка и проверка DHCPv6 Relay на R2

## Общие сведения и сценарий
   * Автоматическая конфигурация адреса без сохранения состояния (Stateless Address Autoconfiguration, SLAAC)
   * DHCPv6 без отслеживания состояния
   * Адресация DHCPv6 с учетом состояний.

   При использовании SLACC для назначения адресов IPv6 хостам сервер DHCPv6 не используется. Поскольку DHCPv6 сервер не используется при реализации SLACC, хосты не могут получать дополнительную важную сетевую информацию, включая адрес сервера доменных имен (DNS), а также имя домена.

   При использовании Stateless DHCPv6 для назначения адресов IPv6 хосту сервер DHCPv6 используется для назначения дополнительной важной информации о сети, однако адрес IPv6 назначается с помощью SLACC.

   При использовании DHCPv6 с отслеживанием состояния, сервер DHCP назначает всю информацию, включая IPv6-адрес узла.

   Определение способа получения динамической IPv6-адресации зависит от установленных значений флагов, содержащихся в объявлениях маршрутизатора (сообщениях RA).

   В предложенном сценарии размеры компании увеличились, и сетевые администраторы больше не имеют возможности назначать IP-адреса для устройств вручную. Ваша задача - настроить маршрутизатор R2 для назначения адресов IPv6 в двух разных подсетях, подключенных к маршрутизатору R1.

   **Примечание:** Маршрутизаторы, используемые в практических лабораторных работах CCNA, - это Cisco 4221 с Cisco IOS XE Release 16.9.4 (образ universalk9). В лабораторных работах используются коммутаторы Cisco Catalyst 2960 с Cisco IOS версии 15.2(2) (образ lanbasek9). Можно использовать другие маршрутизаторы, коммутаторы и версии Cisco IOS. В зависимости от модели устройства и версии Cisco IOS доступные команды и результаты их выполнения могут отличаться от тех, которые показаны в лабораторных работах. Правильные идентификаторы интерфейса см. в сводной таблице по интерфейсам маршрутизаторов в конце лабораторной работы.

   **Примечание.** Убедитесь, что у всех маршрутизаторов и коммутаторов была удалена начальная конфигурация. Если вы не уверены в этом, обратитесь к инструктору.

## Необходимые ресурсы
   * 2 маршрутизатора (Cisco 4221 с универсальным образом Cisco IOS XE версии 16.9.4 или аналогичным)
   * 2 коммутатора (Cisco 2960 с образом lanbasek9 Cisco IOS версии 15.2 (2) или аналогичным) - опционально
   * 2 ПК (ОС Windows с программой эмуляции терминалов, такой как Tera Term)
   * Консольные кабели для настройки устройств Cisco IOS через консольные порты.
   * Кабели Ethernet, расположенные в соответствии с топологией

## Инструкции

## Часть 1. Создание сети и настройка основных параметров устройства

   В первой части лабораторной работы вам предстоит создать топологию сети и настроить базовые параметры для узлов ПК и коммутаторов.

### Шаг 1. Создайте сеть согласно топологии.

   Подключите устройства, как показано в топологии, и подсоедините необходимые кабели.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/my_ipv6_topology.png)

### Шаг 2. Настройте базовые параметры каждого коммутатора. (необязательно)

   a. Присвойте коммутатору имя устройства.

   b. Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

   c. Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

   d. Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

   e. Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.

   f. Зашифруйте открытые пароли.

   g. Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

   h. Отключите все неиспользуемые порты.

   i. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_s1_config.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_s2_config.png)

### Шаг 3. Произведите базовую настройку маршрутизаторов.

   a. Назначьте маршрутизатору имя устройства.

   b. Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

   c. Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

   d. Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

   e. Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.

   f. Зашифруйте открытые пароли.

   g. Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

   h. Активация IPv6-маршрутизации

   i. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r1_config.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r2_config.png)

### Шаг 4. Настройка интерфейсов и маршрутизации для обоих маршрутизаторов.

   a. Настройте интерфейсы G0/0/0 и G0/1 на R1 и R2 с адресами IPv6, указанными в таблице выше.

   b. Настройте маршрут по умолчанию на каждом маршрутизаторе, который указывает на IP-адрес G0/0/0 на другом маршрутизаторе.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r1_addr.png)
![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r2_addr.png)

   c. Убедитесь, что маршрутизация работает с помощью пинга адреса G0/0/1 R2 из R1

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r1_ping_r2.png)

   d. Сохраните текущую конфигурацию в файл загрузочной конфигурации

## Часть 2. Проверка назначения адреса SLAAC от R1

   В части 2 вы убедитесь, что узел PC-A получает адрес IPv6 с помощью метода SLAAC.

   Включите PC-A и убедитесь, что сетевой адаптер настроен для автоматической настройки IPv6.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_pc-a_slaac.png)

   Через несколько минут результаты команды **ipconfig** должны показать, что PC-A присвоил себе адрес из сети 2001:db8:1::/64.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_pc-a_ipconfig.png)

   Откуда взялась часть адреса с идентификатором хоста?

```
EUI-64 - хост создает идентификатор интерфейса, используя свой 48-битный MAC-адрес и вставляет шестнадцатеричное значение fffe в середине адреса
```

## Часть 3. Настройка и проверка сервера DHCPv6 на R1

   В части 3 выполняется настройка и проверка состояния DHCP-сервера на R1. Цель состоит в том, чтобы предоставить PC-A информацию о DNS-сервере и домене.

   a. Выполните команду **ipconfig /all** на PC-A и посмотрите на результат.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_pc-a_ipconf.png)

   b. Обратите внимание, что основной DNS-суффикс отсутствует. Также обратите внимание, что предоставленные адреса DNS-сервера являются адресами «локального сайта anycast», а не одноадресные адреса, как ожидалось.

### Шаг 2. Настройте R1 для предоставления DHCPv6 без состояния для PC-A.

   a. Создайте пул DHCP IPv6 на R1 с именем R1-STATELESS. В составе этого пула назначьте адрес DNS-сервера как 2001:db8:acad: :1, а имя домена — как stateless.com.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r1_dhcp_pool.png)

   b. Настройте интерфейс G0/0/1 на R1, чтобы предоставить флаг конфигурации OTHER для локальной сети R1 и укажите только что созданный пул DHCP в качестве ресурса DHCP для этого интерфейса.

   c. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r1_gi01.png)

   d. Перезапустите PC-A.

   e. Проверьте вывод ipconfig /all и обратите внимание на изменения.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_pc-a_dhcp_stateless.png)

   f. Тестирование подключения с помощью пинга IP-адреса интерфейса G0/1 R2.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_pc-a_ping_r2.png)

## Часть 4. Настройка сервера DHCPv6 с сохранением состояния на R1

   В части 4 настраивается R1 для ответа на запросы DHCPv6 от локальной сети на R2.

   a. Создайте пул DHCPv6 на R1 для сети 2001:db8:acad:3:aaa::/80. Это предоставит адреса локальной сети, подключенной к интерфейсу G0/0/1 на R2. В составе пула задайте DNS-сервер 2001:db8:acad: :254 и задайте доменное имя STATEFUL.com.

   b. Назначьте только что созданный пул DHCPv6 интерфейсу g0/0/0 на R1.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r1_gi00.png)

## Часть 5. Настройка и проверка ретрансляции DHCPv6 на R2.

   В части 5 необходимо настроить и проверить ретрансляцию DHCPv6 на R2, позволяя PC-B получать адрес IPv6.

### Шаг 1. Включите PC-B и проверьте адрес SLAAC, который он генерирует.

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_pc-b_ipconfig.png)
 
   Обратите внимание на вывод, что используется префикс 2001:db8:acad:3::

### Шаг 2. Настройте R2 в качестве агента DHCP-ретрансляции для локальной сети на G0/0/1.

   a. Настройте команду **ipv6 dhcp relay** на интерфейсе R2 G0/0/1, указав адрес назначения интерфейса G0/0/0 на R1. Также настройте команду **managed-config-flag.**

   b. Сохраните конфигурацию

![](https://github.com/pogodin2004/otusNetwork/blob/main/dz08/images/ipv6_r2_the_end.png)

```
CPT не знает команды ipv6 dhcp relay. Дальнейшее продолжение лаборатоной работы не имеет смысла.
```



